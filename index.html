<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProCalc - Advanced Calculator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function AdvancedCalculator() {
          const [display, setDisplay] = useState('0');
          const [prevValue, setPrevValue] = useState(null);
          const [operation, setOperation] = useState(null);
          const [newNumber, setNewNumber] = useState(true);
          const [history, setHistory] = useState([]);
          const [showHistory, setShowHistory] = useState(false);
          const [theme, setTheme] = useState('gradient');
          const [darkMode, setDarkMode] = useState(false);

          const themes = {
            gradient: 'bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500',
            ocean: 'bg-gradient-to-br from-blue-400 via-cyan-500 to-teal-500',
            sunset: 'bg-gradient-to-br from-red-500 via-orange-500 to-yellow-500',
            forest: 'bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600',
            midnight: 'bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600',
            fire: 'bg-gradient-to-br from-yellow-400 via-red-500 to-pink-600'
          };

          const handleNumber = (num) => {
            if (newNumber) {
              setDisplay(String(num));
              setNewNumber(false);
            } else {
              setDisplay(display === '0' ? String(num) : display + num);
            }
          };

          const handleDecimal = () => {
            if (!display.includes('.')) {
              setDisplay(display + '.');
              setNewNumber(false);
            }
          };

          const handleOperation = (op) => {
            const current = parseFloat(display);
            
            if (prevValue === null) {
              setPrevValue(current);
            } else if (operation) {
              const result = calculate(prevValue, current, operation);
              setDisplay(String(result));
              setPrevValue(result);
            }
            
            setOperation(op);
            setNewNumber(true);
          };

          const calculate = (a, b, op) => {
            switch (op) {
              case '+': return a + b;
              case '-': return a - b;
              case '×': return a * b;
              case '÷': return b !== 0 ? a / b : 'Error';
              case '%': return a % b;
              case '^': return Math.pow(a, b);
              default: return b;
            }
          };

          const handleEquals = () => {
            if (operation && prevValue !== null) {
              const current = parseFloat(display);
              const result = calculate(prevValue, current, operation);
              const calculation = `${prevValue} ${operation} ${current} = ${result}`;
              
              setHistory([calculation, ...history.slice(0, 9)]);
              setDisplay(String(result));
              setPrevValue(null);
              setOperation(null);
              setNewNumber(true);
            }
          };

          const handleClear = () => {
            setDisplay('0');
            setPrevValue(null);
            setOperation(null);
            setNewNumber(true);
          };

          const handleScientific = (func) => {
            const current = parseFloat(display);
            let result;
            
            switch (func) {
              case 'sin': result = Math.sin(current * Math.PI / 180); break;
              case 'cos': result = Math.cos(current * Math.PI / 180); break;
              case 'tan': result = Math.tan(current * Math.PI / 180); break;
              case 'sqrt': result = Math.sqrt(current); break;
              case 'log': result = Math.log10(current); break;
              case 'ln': result = Math.log(current); break;
              case '1/x': result = 1 / current; break;
              case 'x²': result = current * current; break;
              default: result = current;
            }
            
            setDisplay(String(result));
            setNewNumber(true);
          };

          const bgClass = darkMode ? 'bg-gray-900' : themes[theme];
          const cardBg = darkMode ? 'bg-gray-800' : 'bg-white/90 backdrop-blur-lg';
          const textColor = darkMode ? 'text-white' : 'text-gray-800';
          const buttonBg = darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-white/50 hover:bg-white/70';
          const operatorBg = darkMode ? 'bg-orange-600 hover:bg-orange-500' : 'bg-gradient-to-r from-orange-400 to-pink-500 hover:from-orange-500 hover:to-pink-600';

          // SVG Icons
          const CalculatorIcon = () => (
            <svg className={`${textColor} w-6 h-6`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <rect x="4" y="2" width="16" height="20" rx="2" strokeWidth="2"/>
              <line x1="8" y1="6" x2="16" y2="6" strokeWidth="2"/>
              <line x1="8" y1="10" x2="16" y2="10" strokeWidth="2"/>
              <line x1="8" y1="14" x2="16" y2="14" strokeWidth="2"/>
            </svg>
          );

          const HistoryIcon = () => (
            <svg className={`w-5 h-5 ${darkMode ? 'text-blue-400' : 'text-blue-600'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          );

          const MoonIcon = () => (
            <svg className="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeWidth="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
          );

          const SunIcon = () => (
            <svg className="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeWidth="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
          );

          return (
            <div className={`min-h-screen ${bgClass} flex items-center justify-center p-4 transition-all duration-500`}>
              <div className={`${cardBg} rounded-3xl shadow-2xl p-6 w-full max-w-md transition-all duration-300`}>
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center gap-2">
                    <CalculatorIcon />
                    <h1 className={`text-xl font-bold ${textColor}`}>ProCalc</h1>
                  </div>
                  <div className="flex gap-2">
                    <button
                      onClick={() => setDarkMode(!darkMode)}
                      className={`p-2 rounded-lg ${buttonBg} transition-all`}
                    >
                      {darkMode ? <SunIcon /> : <MoonIcon />}
                    </button>
                    <button
                      onClick={() => setShowHistory(!showHistory)}
                      className={`p-2 rounded-lg ${buttonBg} transition-all`}
                    >
                      <HistoryIcon />
                    </button>
                  </div>
                </div>

                {!darkMode && (
                  <div className="flex gap-2 mb-4 overflow-x-auto pb-2">
                    {Object.keys(themes).map((t) => (
                      <button
                        key={t}
                        onClick={() => setTheme(t)}
                        className={`w-8 h-8 rounded-full ${themes[t]} ${theme === t ? 'ring-4 ring-white' : ''} transition-all flex-shrink-0`}
                        title={t}
                      />
                    ))}
                  </div>
                )}

                <div className={`${darkMode ? 'bg-gray-900' : 'bg-gradient-to-r from-gray-100 to-gray-200'} rounded-2xl p-6 mb-4 shadow-inner`}>
                  <div className={`text-right text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'} mb-2 h-8 font-mono`}>
                    {operation && prevValue !== null ? `${prevValue} ${operation} ${!newNumber ? display : ''}` : prevValue !== null && !operation ? prevValue : ''}
                  </div>
                  <div className={`text-right text-4xl font-bold ${textColor} truncate`}>
                    {display}
                  </div>
                </div>

                {showHistory && (
                  <div className={`${darkMode ? 'bg-gray-900' : 'bg-gray-100'} rounded-2xl p-4 mb-4 max-h-40 overflow-y-auto`}>
                    <h3 className={`text-sm font-semibold ${textColor} mb-2`}>History</h3>
                    {history.length === 0 ? (
                      <p className={`text-sm ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>No calculations yet</p>
                    ) : (
                      history.map((calc, idx) => (
                        <div key={idx} className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'} py-1`}>
                          {calc}
                        </div>
                      ))
                    )}
                  </div>
                )}

                <div className="grid grid-cols-4 gap-2 mb-2">
                  {['sin', 'cos', 'tan', 'sqrt'].map((func) => (
                    <button
                      key={func}
                      onClick={() => handleScientific(func)}
                      className={`p-2 rounded-xl ${darkMode ? 'bg-blue-900 hover:bg-blue-800 text-blue-200' : 'bg-gradient-to-r from-blue-400 to-cyan-500 hover:from-blue-500 hover:to-cyan-600'} text-white font-semibold text-sm transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}
                    >
                      {func}
                    </button>
                  ))}
                </div>

                <div className="grid grid-cols-4 gap-2 mb-4">
                  {['log', 'ln', '1/x', 'x²'].map((func) => (
                    <button
                      key={func}
                      onClick={() => handleScientific(func)}
                      className={`p-2 rounded-xl ${darkMode ? 'bg-purple-900 hover:bg-purple-800 text-purple-200' : 'bg-gradient-to-r from-purple-400 to-pink-500 hover:from-purple-500 hover:to-pink-600'} text-white font-semibold text-sm transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}
                    >
                      {func}
                    </button>
                  ))}
                </div>

                <div className="grid grid-cols-4 gap-3">
                  <button onClick={handleClear} className={`col-span-2 p-4 rounded-xl ${darkMode ? 'bg-red-900 hover:bg-red-800' : 'bg-gradient-to-r from-red-400 to-pink-500 hover:from-red-500 hover:to-pink-600'} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    AC
                  </button>
                  <button onClick={() => handleOperation('%')} className={`p-4 rounded-xl ${operatorBg} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    %
                  </button>
                  <button onClick={() => handleOperation('÷')} className={`p-4 rounded-xl ${operatorBg} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    ÷
                  </button>

                  {[7, 8, 9].map(num => (
                    <button key={num} onClick={() => handleNumber(num)} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                      {num}
                    </button>
                  ))}
                  <button onClick={() => handleOperation('×')} className={`p-4 rounded-xl ${operatorBg} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    ×
                  </button>

                  {[4, 5, 6].map(num => (
                    <button key={num} onClick={() => handleNumber(num)} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                      {num}
                    </button>
                  ))}
                  <button onClick={() => handleOperation('-')} className={`p-4 rounded-xl ${operatorBg} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    -
                  </button>

                  {[1, 2, 3].map(num => (
                    <button key={num} onClick={() => handleNumber(num)} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                      {num}
                    </button>
                  ))}
                  <button onClick={() => handleOperation('+')} className={`p-4 rounded-xl ${operatorBg} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    +
                  </button>

                  <button onClick={() => handleOperation('^')} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                    x^y
                  </button>
                  <button onClick={() => handleNumber(0)} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                    0
                  </button>
                  <button onClick={handleDecimal} className={`p-4 rounded-xl ${buttonBg} ${textColor} font-semibold text-lg transition-all shadow-md hover:shadow-lg transform hover:scale-105`}>
                    .
                  </button>
                  <button onClick={handleEquals} className={`p-4 rounded-xl ${darkMode ? 'bg-green-700 hover:bg-green-600' : 'bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600'} text-white font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105`}>
                    =
                  </button>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.render(<AdvancedCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
